<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The modelsum function • arsenal</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The modelsum function">
<meta property="og:description" content="arsenal">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">arsenal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/comparedf.html">The comparedf function</a>
    </li>
    <li>
      <a href="../articles/freqlist.html">The freqlist function</a>
    </li>
    <li>
      <a href="../articles/labels.html">A Few Notes on Labels</a>
    </li>
    <li>
      <a href="../articles/modelsum.html">The modelsum function</a>
    </li>
    <li>
      <a href="../articles/paired.html">The paired function</a>
    </li>
    <li>
      <a href="../articles/tableby.html">The tableby function</a>
    </li>
    <li>
      <a href="../articles/write2.html">The write2 function</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mayoverse/arsenal/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The modelsum function</h1>
                        <h4 class="author">Beth Atkinson, Ethan Heinzen, Pat Votruba, Jason Sinnwell, Shannon McDonnell and Greg Dougherty</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mayoverse/arsenal/blob/master/vignettes/modelsum.Rmd"><code>vignettes/modelsum.Rmd</code></a></small>
      <div class="hidden name"><code>modelsum.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Very often we are asked to summarize model results from multiple fits into a nice table. The endpoint might be of different types (e.g., survival, case/control, continuous) and there may be several independent variables that we want to examine univariately or adjusted for certain variables such as age and sex. Locally at Mayo, the SAS macros <code>%modelsum</code>, <code>%glmuniv</code>, and <code>%logisuni</code> were written to create such summary tables. With the increasing interest in R, we have developed the function <code>modelsum</code> to create similar tables within the R environment.</p>
<p>In developing the <code>modelsum</code> function, the goal was to bring the best features of these macros into an R function. However, the task was not simply to duplicate all the functionality, but rather to make use of R’s strengths (modeling, method dispersion, flexibility in function definition and output format) and make a tool that fits the needs of R users. Additionally, the results needed to fit within the general reproducible research framework so the tables could be displayed within an R markdown report.</p>
<p>This report provides step-by-step directions for using the functions associated with <code>modelsum</code>. All functions presented here are available within the <code>arsenal</code> package. An assumption is made that users are somewhat familiar with R markdown documents. For those who are new to the topic, a good initial resource is available at <a href="http://rmarkdown.rstudio.com">rmarkdown.rstudio.com</a>.</p>
</div>
<div id="simple-example" class="section level1">
<h1 class="hasAnchor">
<a href="#simple-example" class="anchor"></a>Simple Example</h1>
<p>The first step when using the <code>modelsum</code> function is to load the <code>arsenal</code> package. All the examples in this report use a dataset called <code>mockstudy</code> made available by Paul Novotny which includes a variety of types of variables (character, numeric, factor, ordered factor, survival) to use as examples.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r">&gt; require(arsenal)
Loading required package: arsenal
&gt; data(mockstudy) # load data
&gt; dim(mockstudy)  # look at how many subjects and variables are in the dataset 
[1] 1499   14
&gt; # help(mockstudy) # learn more about the dataset and variables
&gt; str(mockstudy) # quick look at the data
'data.frame':   1499 obs. of  14 variables:
 $ case       : int  110754 99706 105271 105001 112263 86205 99508 90158 88989 90515 ...
 $ age        : int  67 74 50 71 69 56 50 57 51 63 ...
  ..- attr(*, "label")= chr "Age in Years"
 $ arm        : chr  "F: FOLFOX" "A: IFL" "A: IFL" "G: IROX" ...
  ..- attr(*, "label")= chr "Treatment Arm"
 $ sex        : Factor w/ 2 levels "Male","Female": 1 2 2 2 2 1 1 1 2 1 ...
 $ race       : chr  "Caucasian" "Caucasian" "Caucasian" "Caucasian" ...
  ..- attr(*, "label")= chr "Race"
 $ fu.time    : int  922 270 175 128 233 120 369 421 387 363 ...
 $ fu.stat    : int  2 2 2 2 2 2 2 2 2 2 ...
 $ ps         : int  0 1 1 1 0 0 0 0 1 1 ...
 $ hgb        : num  11.5 10.7 11.1 12.6 13 10.2 13.3 12.1 13.8 12.1 ...
 $ bmi        : num  25.1 19.5 NA 29.4 26.4 ...
  ..- attr(*, "label")= chr "Body Mass Index (kg/m^2)"
 $ alk.phos   : int  160 290 700 771 350 569 162 152 231 492 ...
 $ ast        : int  35 52 100 68 35 27 16 12 25 18 ...
 $ mdquality.s: int  NA 1 1 1 NA 1 1 1 1 1 ...
 $ age.ord    : Ord.factor w/ 8 levels "10-19"&lt;"20-29"&lt;..: 6 7 4 7 6 5 4 5 5 6 ...</pre></body></html></div>
<p>To create a simple linear regression table (the default), use a formula statement to specify the variables that you want summarized. The example below predicts BMI with the variables sex and age.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">&gt; tab1 &lt;- modelsum(bmi ~ sex + age, data=mockstudy)</pre></body></html></div>
<p>If you want to take a quick look at the table, you can use <code>summary</code> on your modelsum object and the table will print out as text in your R console window. If you use <code>summary</code> without any options you will see a number of <span class="math inline">\(\&amp;nbsp;\)</span> statements which translates to “space” in HTML.</p>
<div id="pretty-text-version-of-table" class="section level2">
<h2 class="hasAnchor">
<a href="#pretty-text-version-of-table" class="anchor"></a>Pretty text version of table</h2>
<p>If you want a nicer version in your console window then adding the <code>text=TRUE</code> option.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r">&gt; summary(tab1, text=TRUE)


|             |estimate |std.error |p.value |adj.r.squared |Nmiss |
|:------------|:--------|:---------|:-------|:-------------|:-----|
|(Intercept)  |27.491   |0.181     |&lt; 0.001 |0.004         |33    |
|sex Female   |-0.731   |0.290     |0.012   |              |      |
|(Intercept)  |26.424   |0.752     |&lt; 0.001 |0.000         |33    |
|Age in Years |0.013    |0.012     |0.290   |              |      |</pre></body></html></div>
</div>
<div id="pretty-rmarkdown-version-of-table" class="section level2">
<h2 class="hasAnchor">
<a href="#pretty-rmarkdown-version-of-table" class="anchor"></a>Pretty Rmarkdown version of table</h2>
<p>In order for the report to look nice within an R markdown (knitr) report, you just need to specify <code>results="asis"</code> when creating the r chunk. This changes the layout slightly (compresses it) and bolds the variable names.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">&gt; summary(tab1)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="data-frame-version-of-table" class="section level2">
<h2 class="hasAnchor">
<a href="#data-frame-version-of-table" class="anchor"></a>Data frame version of table</h2>
<p>If you want a data.frame version, simply use <code>as.data.frame</code>.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r">&gt; as.data.frame(tab1)
  y.term                  y.label strata.term adjustment model        term
1    bmi Body Mass Index (kg/m^2)             unadjusted     1 (Intercept)
2    bmi Body Mass Index (kg/m^2)             unadjusted     1   sexFemale
3    bmi Body Mass Index (kg/m^2)             unadjusted     2 (Intercept)
4    bmi Body Mass Index (kg/m^2)             unadjusted     2         age
         label term.type    estimate  std.error       p.value adj.r.squared
1  (Intercept) Intercept 27.49147713 0.18134740  0.000000e+00  3.632258e-03
2   sex Female      Term -0.73105055 0.29032223  1.190605e-02  3.632258e-03
3  (Intercept) Intercept 26.42372272 0.75211474 1.279109e-196  8.354809e-05
4 Age in Years      Term  0.01304859 0.01231653  2.895753e-01  8.354809e-05
  Nmiss
1    33
2    33
3    33
4    33</pre></body></html></div>
</div>
<div id="add-an-adjustor-to-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#add-an-adjustor-to-the-model" class="anchor"></a>Add an adjustor to the model</h2>
<p>The argument <code>adjust</code> allows the user to indicate that all the variables should be adjusted for these terms. To adjust each model for age and sex (for instance), we use <code>adjust = ~ age + sex</code>:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r">&gt; tab2 &lt;- modelsum(alk.phos ~ arm + ps + hgb, adjust= ~age + sex, data=mockstudy)
&gt; summary(tab2)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">175.548</td>
<td align="left">20.587</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.001</td>
<td align="left">266</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">-13.701</td>
<td align="left">8.730</td>
<td align="left">0.117</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">-2.245</td>
<td align="left">9.860</td>
<td align="left">0.820</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.017</td>
<td align="left">0.319</td>
<td align="left">0.956</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">3.016</td>
<td align="left">7.521</td>
<td align="left">0.688</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">148.391</td>
<td align="left">19.585</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.045</td>
<td align="left">266</td>
</tr>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="left">46.721</td>
<td align="left">5.987</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.084</td>
<td align="left">0.311</td>
<td align="left">0.787</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.169</td>
<td align="left">7.343</td>
<td align="left">0.874</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">336.554</td>
<td align="left">32.239</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.031</td>
<td align="left">266</td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="left">-13.845</td>
<td align="left">2.137</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.095</td>
<td align="left">0.314</td>
<td align="left">0.763</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-5.980</td>
<td align="left">7.516</td>
<td align="left">0.426</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="models-for-each-endpoint-type" class="section level1">
<h1 class="hasAnchor">
<a href="#models-for-each-endpoint-type" class="anchor"></a>Models for each endpoint type</h1>
<p>To make sure the correct model is run you need to specify “family”. The options available right now are : gaussian, binomial, survival, and poisson. If there is enough interest, additional models can be added.</p>
<div id="gaussian" class="section level2">
<h2 class="hasAnchor">
<a href="#gaussian" class="anchor"></a>Gaussian</h2>
<div id="fit-and-summarize-linear-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#fit-and-summarize-linear-regression-model" class="anchor"></a>Fit and summarize linear regression model</h3>
<p>Look at whether there is any evidence that AlkPhos values vary by study arm after adjusting for sex and age (assuming a linear age relationship).</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">&gt; fit &lt;- lm(alk.phos ~ arm + age + sex, data=mockstudy)
&gt; summary(fit)

Call:
lm(formula = alk.phos ~ arm + age + sex, data = mockstudy)

Residuals:
    Min      1Q  Median      3Q     Max 
-168.80  -81.45  -47.17   37.39  853.56 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  175.54808   20.58665   8.527   &lt;2e-16 ***
armF: FOLFOX -13.70062    8.72963  -1.569    0.117    
armG: IROX    -2.24498    9.86004  -0.228    0.820    
age           -0.01741    0.31878  -0.055    0.956    
sexFemale      3.01598    7.52097   0.401    0.688    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 128.5 on 1228 degrees of freedom
  (266 observations deleted due to missingness)
Multiple R-squared:  0.002552,  Adjusted R-squared:  -0.0006969 
F-statistic: 0.7855 on 4 and 1228 DF,  p-value: 0.5346
&gt; plot(fit)</pre></body></html></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-3-1.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-3-2.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-3-3.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-3-4.png" width="700"></p>
<p>The results suggest that the endpoint may need to be transformed. Calculating the Box-Cox transformation suggests a log transformation.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r">&gt; require(MASS)
&gt; boxcox(fit)</pre></body></html></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">&gt; fit2 &lt;- lm(log(alk.phos) ~ arm + age + sex, data=mockstudy)
&gt; summary(fit2)

Call:
lm(formula = log(alk.phos) ~ arm + age + sex, data = mockstudy)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.0098 -0.4470 -0.1065  0.4205  2.0620 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   4.9692474  0.1025239  48.469   &lt;2e-16 ***
armF: FOLFOX -0.0766798  0.0434746  -1.764    0.078 .  
armG: IROX   -0.0192828  0.0491041  -0.393    0.695    
age          -0.0004058  0.0015876  -0.256    0.798    
sexFemale     0.0179253  0.0374553   0.479    0.632    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.6401 on 1228 degrees of freedom
  (266 observations deleted due to missingness)
Multiple R-squared:  0.003121,  Adjusted R-squared:  -0.0001258 
F-statistic: 0.9613 on 4 and 1228 DF,  p-value: 0.4278
&gt; plot(fit2)</pre></body></html></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-5-1.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-5-2.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-5-3.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-5-4.png" width="700"></p>
<p>Finally, look to see whether there there is a non-linear relationship with age.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r">&gt; require(gam)
&gt; fit3 &lt;- lm(log(alk.phos) ~ arm + ns(age, df=2) + sex, data=mockstudy)
&gt; 
&gt; # test whether there is a difference between models 
&gt; stats::anova(fit2,fit3)
Analysis of Variance Table

Model 1: log(alk.phos) ~ arm + age + sex
Model 2: log(alk.phos) ~ arm + ns(age, df = 2) + sex
  Res.Df    RSS Df Sum of Sq      F  Pr(&gt;F)  
1   1228 503.19                              
2   1227 502.07  1    1.1137 2.7218 0.09924 .
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
&gt; 
&gt; # look at functional form of age
&gt; termplot(fit3, term=2, se=T, rug=T)</pre></body></html></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>In this instance it looks like there isn’t enough evidence to say that the relationship is non-linear.</p>
</div>
<div id="extract-data-using-the-broom-package" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-the-broom-package" class="anchor"></a>Extract data using the <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r">&gt; tmp &lt;- tidy(fit3) # coefficients, p-values
&gt; class(tmp)
[1] "tbl_df"     "tbl"        "data.frame"
&gt; tmp
# A tibble: 6 x 5
  term             estimate std.error statistic   p.value
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)        4.76      0.141     33.8   1.93e-177
2 armF: FOLFOX      -0.0767    0.0434    -1.77  7.78e-  2
3 armG: IROX        -0.0195    0.0491    -0.396 6.92e-  1
4 ns(age, df = 2)1   0.330     0.260      1.27  2.04e-  1
5 ns(age, df = 2)2  -0.101     0.0935    -1.08  2.82e-  1
6 sexFemale          0.0183    0.0374     0.489 6.25e-  1
&gt; 
&gt; glance(fit3)
# A tibble: 1 x 12
  r.squared adj.r.squared sigma statistic p.value    df logLik   AIC   BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   0.00533       0.00127 0.640      1.31   0.255     5 -1196. 2405. 2441.
# … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</pre></body></html></div>
</div>
<div id="create-a-summary-table-using-modelsum" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb12"><html><body><pre class="r">&gt; ms.logy &lt;- modelsum(log(alk.phos) ~ arm + ps + hgb, data=mockstudy, adjust= ~age + sex, 
+                     family=gaussian,  
+                     gaussian.stats=c("estimate","CI.lower.estimate","CI.upper.estimate","p.value"))
&gt; summary(ms.logy)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">CI.lower.estimate</th>
<th align="left">CI.upper.estimate</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.969</td>
<td align="left">4.768</td>
<td align="left">5.170</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">-0.077</td>
<td align="left">-0.162</td>
<td align="left">0.009</td>
<td align="left">0.078</td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">-0.019</td>
<td align="left">-0.116</td>
<td align="left">0.077</td>
<td align="left">0.695</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.000</td>
<td align="left">-0.004</td>
<td align="left">0.003</td>
<td align="left">0.798</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">0.018</td>
<td align="left">-0.056</td>
<td align="left">0.091</td>
<td align="left">0.632</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">4.832</td>
<td align="left">4.640</td>
<td align="left">5.023</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="left">0.226</td>
<td align="left">0.167</td>
<td align="left">0.284</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.001</td>
<td align="left">-0.004</td>
<td align="left">0.002</td>
<td align="left">0.636</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">0.009</td>
<td align="left">-0.063</td>
<td align="left">0.081</td>
<td align="left">0.814</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">5.765</td>
<td align="left">5.450</td>
<td align="left">6.080</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="left">-0.069</td>
<td align="left">-0.090</td>
<td align="left">-0.048</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.000</td>
<td align="left">-0.003</td>
<td align="left">0.003</td>
<td align="left">0.925</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.027</td>
<td align="left">-0.101</td>
<td align="left">0.046</td>
<td align="left">0.468</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="binomial" class="section level2">
<h2 class="hasAnchor">
<a href="#binomial" class="anchor"></a>Binomial</h2>
<div id="fit-and-summarize-logistic-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#fit-and-summarize-logistic-regression-model" class="anchor"></a>Fit and summarize logistic regression model</h3>
<div class="sourceCode" id="cb13"><html><body><pre class="r">&gt; boxplot(age ~ mdquality.s, data=mockstudy, ylab=attr(mockstudy$age,'label'), xlab='mdquality.s')</pre></body></html></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><html><body><pre class="r">&gt; 
&gt; fit &lt;- glm(mdquality.s ~ age + sex, data=mockstudy, family=binomial)
&gt; summary(fit)

Call:
glm(formula = mdquality.s ~ age + sex, family = binomial, data = mockstudy)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.1832   0.4500   0.4569   0.4626   0.4756  

Coefficients:
             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)  2.329442   0.514684   4.526 6.01e-06 ***
age         -0.002353   0.008256  -0.285    0.776    
sexFemale    0.039227   0.195330   0.201    0.841    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 807.68  on 1246  degrees of freedom
Residual deviance: 807.55  on 1244  degrees of freedom
  (252 observations deleted due to missingness)
AIC: 813.55

Number of Fisher Scoring iterations: 4
&gt; 
&gt; # create Odd's ratio w/ confidence intervals
&gt; tmp &lt;- data.frame(summary(fit)$coef)
&gt; tmp
                Estimate  Std..Error    z.value     Pr...z..
(Intercept)  2.329441734 0.514683688  4.5259677 6.011977e-06
age         -0.002353404 0.008255814 -0.2850602 7.755980e-01
sexFemale    0.039227292 0.195330166  0.2008256 8.408350e-01
&gt; 
&gt; tmp$OR &lt;- round(exp(tmp[,1]),2)
&gt; tmp$lower.CI &lt;- round(exp(tmp[,1] - 1.96* tmp[,2]),2)
&gt; tmp$upper.CI &lt;- round(exp(tmp[,1] + 1.96* tmp[,2]),2)
&gt; names(tmp)[4] &lt;- 'P-value'
&gt; 
&gt; kable(tmp[,c('OR','lower.CI','upper.CI','P-value')])</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">OR</th>
<th align="right">lower.CI</th>
<th align="right">upper.CI</th>
<th align="right">P-value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">10.27</td>
<td align="right">3.75</td>
<td align="right">28.17</td>
<td align="right">0.000006</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="right">1.00</td>
<td align="right">0.98</td>
<td align="right">1.01</td>
<td align="right">0.775598</td>
</tr>
<tr class="odd">
<td align="left">sexFemale</td>
<td align="right">1.04</td>
<td align="right">0.71</td>
<td align="right">1.53</td>
<td align="right">0.840835</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb15"><html><body><pre class="r">&gt; 
&gt; # Assess the predictive ability of the model
&gt; 
&gt; # code using the pROC package
&gt; require(pROC)
&gt; pred &lt;- predict(fit, type='response')
&gt; tmp &lt;- pROC::roc(mockstudy$mdquality.s[!is.na(mockstudy$mdquality.s)]~ pred, plot=TRUE, percent=TRUE)
Setting levels: control = 0, case = 1
Setting direction: controls &lt; cases</pre></body></html></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-9-2.png" width="700"></p>
<div class="sourceCode" id="cb16"><html><body><pre class="r">&gt; tmp$auc
Area under the curve: 50.69%</pre></body></html></div>
</div>
<div id="extract-data-using-broom-package" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r">&gt; tidy(fit, exp=T, conf.int=T) # coefficients, p-values, conf.intervals
# A tibble: 3 x 7
  term        estimate std.error statistic    p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)   10.3     0.515       4.53  0.00000601    3.83      28.9 
2 age            0.998   0.00826    -0.285 0.776         0.981      1.01
3 sexFemale      1.04    0.195       0.201 0.841         0.712      1.53
&gt; 
&gt; glance(fit) # model summary statistics
# A tibble: 1 x 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1          808.    1246  -404.  814.  829.     808.        1244  1247</pre></body></html></div>
</div>
<div id="create-a-summary-table-using-modelsum-1" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-1" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb18"><html><body><pre class="r">&gt; summary(modelsum(mdquality.s ~ age + bmi, data=mockstudy, adjust=~sex, family=binomial))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.272</td>
<td align="left">3.831</td>
<td align="left">28.876</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.507</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.998</td>
<td align="left">0.981</td>
<td align="left">1.014</td>
<td align="left">0.776</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.040</td>
<td align="left">0.712</td>
<td align="left">1.534</td>
<td align="left">0.841</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">4.814</td>
<td align="left">1.709</td>
<td align="left">13.221</td>
<td align="left">0.003</td>
<td align="left">0.550</td>
<td align="left">273</td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.063</td>
<td align="left">0.220</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.053</td>
<td align="left">0.717</td>
<td align="left">1.561</td>
<td align="left">0.794</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb19"><html><body><pre class="r">&gt; 
&gt; fitall &lt;- modelsum(mdquality.s ~ age, data=mockstudy, family=binomial,
+                    binomial.stats=c("Nmiss2","OR","p.value"))
&gt; summary(fitall)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">p.value</th>
<th align="left">Nmiss2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.493</td>
<td align="left">&lt; 0.001</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.998</td>
<td align="left">0.766</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="survival" class="section level2">
<h2 class="hasAnchor">
<a href="#survival" class="anchor"></a>Survival</h2>
<div id="fit-and-summarize-a-cox-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#fit-and-summarize-a-cox-regression-model" class="anchor"></a>Fit and summarize a Cox regression model</h3>
<div class="sourceCode" id="cb20"><html><body><pre class="r">&gt; require(survival)
Loading required package: survival
&gt; 
&gt; # multivariable model with all 3 terms
&gt; fit  &lt;- coxph(Surv(fu.time, fu.stat) ~ age + sex + arm, data=mockstudy)
&gt; summary(fit)
Call:
coxph(formula = Surv(fu.time, fu.stat) ~ age + sex + arm, data = mockstudy)

  n= 1499, number of events= 1356 

                  coef exp(coef)  se(coef)      z Pr(&gt;|z|)    
age           0.004600  1.004611  0.002501  1.839   0.0659 .  
sexFemale     0.039893  1.040699  0.056039  0.712   0.4765    
armF: FOLFOX -0.454650  0.634670  0.064878 -7.008 2.42e-12 ***
armG: IROX   -0.140785  0.868676  0.072760 -1.935   0.0530 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

             exp(coef) exp(-coef) lower .95 upper .95
age             1.0046     0.9954    0.9997    1.0095
sexFemale       1.0407     0.9609    0.9324    1.1615
armF: FOLFOX    0.6347     1.5756    0.5589    0.7207
armG: IROX      0.8687     1.1512    0.7532    1.0018

Concordance= 0.563  (se = 0.009 )
Likelihood ratio test= 56.21  on 4 df,   p=2e-11
Wald test            = 56.26  on 4 df,   p=2e-11
Score (logrank) test = 56.96  on 4 df,   p=1e-11
&gt; 
&gt; # check proportional hazards assumption
&gt; fit.z &lt;- cox.zph(fit)
&gt; fit.z
       chisq df    p
age     1.41  1 0.24
sex     1.08  1 0.30
arm     1.80  2 0.41
GLOBAL  4.68  4 0.32
&gt; plot(fit.z[1], resid=FALSE) # makes for a cleaner picture in this case
&gt; abline(h=coef(fit)[1], col='red')</pre></body></html></div>
<p><img src="modelsum_files/figure-html/survival-1.png" width="700"></p>
<div class="sourceCode" id="cb21"><html><body><pre class="r">&gt; 
&gt; # check functional form for age using pspline (penalized spline)
&gt; # results are returned for the linear and non-linear components
&gt; fit2 &lt;- coxph(Surv(fu.time, fu.stat) ~ pspline(age) + sex + arm, data=mockstudy)
&gt; fit2
Call:
coxph(formula = Surv(fu.time, fu.stat) ~ pspline(age) + sex + 
    arm, data = mockstudy)

                         coef se(coef)      se2    Chisq   DF       p
pspline(age), linear  0.00443  0.00237  0.00237  3.48989 1.00  0.0617
pspline(age), nonlin                            13.11270 3.08  0.0047
sexFemale             0.03993  0.05610  0.05607  0.50663 1.00  0.4766
armF: FOLFOX         -0.46240  0.06494  0.06493 50.69608 1.00 1.1e-12
armG: IROX           -0.15243  0.07301  0.07299  4.35876 1.00  0.0368

Iterations: 6 outer, 16 Newton-Raphson
     Theta= 0.954 
Degrees of freedom for terms= 4.1 1.0 2.0 
Likelihood ratio test=70.1  on 7.08 df, p=2e-12
n= 1499, number of events= 1356 
&gt; 
&gt; # plot smoothed age to visualize why significant
&gt; termplot(fit2, se=T, terms=1)
&gt; abline(h=0)</pre></body></html></div>
<p><img src="modelsum_files/figure-html/survival-2.png" width="700"></p>
<div class="sourceCode" id="cb22"><html><body><pre class="r">&gt; 
&gt; # The c-statistic comes out in the summary of the fit
&gt; summary(fit2)$concordance
        C     se(C) 
0.5684325 0.5684325 
&gt; 
&gt; # It can also be calculated using the survConcordance function
&gt; survConcordance(Surv(fu.time, fu.stat) ~ predict(fit2), data=mockstudy)
$concordance
concordant 
 0.5684325 

$stats
concordant discordant  tied.risk  tied.time   std(c-d) 
 620221.00  470282.00    5021.00     766.00   19235.49 

$n
[1] 1499

$std.err
   std(c-d) 
0.008779125 

$call
survConcordance(formula = Surv(fu.time, fu.stat) ~ predict(fit2), 
    data = mockstudy)

attr(,"class")
[1] "survConcordance"</pre></body></html></div>
</div>
<div id="extract-data-using-broom-package-1" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package-1" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r">&gt; tidy(fit) # coefficients, p-values
# A tibble: 4 x 5
  term         estimate std.error statistic  p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 age           0.00460   0.00250     1.84  6.59e- 2
2 sexFemale     0.0399    0.0560      0.712 4.77e- 1
3 armF: FOLFOX -0.455     0.0649     -7.01  2.42e-12
4 armG: IROX   -0.141     0.0728     -1.93  5.30e- 2
&gt; 
&gt; glance(fit) # model summary statistics
# A tibble: 1 x 18
      n nevent statistic.log p.value.log statistic.sc p.value.sc statistic.wald
  &lt;int&gt;  &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;
1  1499   1356          56.2    1.81e-11         57.0   1.26e-11           56.3
# … with 11 more variables: p.value.wald &lt;dbl&gt;, statistic.robust &lt;dbl&gt;,
#   p.value.robust &lt;dbl&gt;, r.squared &lt;dbl&gt;, r.squared.max &lt;dbl&gt;,
#   concordance &lt;dbl&gt;, std.error.concordance &lt;dbl&gt;, logLik &lt;dbl&gt;, AIC &lt;dbl&gt;,
#   BIC &lt;dbl&gt;, nobs &lt;int&gt;</pre></body></html></div>
</div>
<div id="create-a-summary-table-using-modelsum-2" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-2" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb24"><html><body><pre class="r">&gt; ##Note: You must use quotes when specifying family="survival" 
&gt; ##      family=survival will not work
&gt; summary(modelsum(Surv(fu.time, fu.stat) ~ arm, 
+                  adjust=~age + sex, data=mockstudy, family="survival"))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">HR</th>
<th align="left">CI.lower.HR</th>
<th align="left">CI.upper.HR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.635</td>
<td align="left">0.559</td>
<td align="left">0.721</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.563</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.869</td>
<td align="left">0.753</td>
<td align="left">1.002</td>
<td align="left">0.053</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">1.005</td>
<td align="left">1.000</td>
<td align="left">1.010</td>
<td align="left">0.066</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.041</td>
<td align="left">0.932</td>
<td align="left">1.162</td>
<td align="left">0.477</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb25"><html><body><pre class="r">&gt; 
&gt; ##Note: the pspline term is not working yet
&gt; #summary(modelsum(Surv(fu.time, fu.stat) ~ arm, 
&gt; #                adjust=~pspline(age) + sex, data=mockstudy, family='survival'))</pre></body></html></div>
</div>
</div>
<div id="poisson" class="section level2">
<h2 class="hasAnchor">
<a href="#poisson" class="anchor"></a>Poisson</h2>
<p>Poisson regression is useful when predicting an outcome variable representing counts. It can also be useful when looking at survival data. Cox models and Poisson models are very closely related and survival data can be summarized using Poisson regression. If you have overdispersion (see if the residual deviance is much larger than degrees of freedom), you may want to use <code><a href="https://rdrr.io/r/stats/family.html">quasipoisson()</a></code> instead of <code><a href="https://rdrr.io/r/stats/family.html">poisson()</a></code>. Some of these diagnostics need to be done outside of <code>modelsum</code>.</p>
<div id="example-1-fit-and-summarize-a-poisson-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-fit-and-summarize-a-poisson-regression-model" class="anchor"></a>Example 1: fit and summarize a Poisson regression model</h3>
<p>For the first example, use the solder dataset available in the <code>rpart</code> package. The endpoint <code>skips</code> has a definite Poisson look.</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r">&gt; require(rpart) ##just to get access to solder dataset
&gt; data(solder)
&gt; hist(solder$skips)</pre></body></html></div>
<p><img src="modelsum_files/figure-html/poisson-1.png" width="700"></p>
<div class="sourceCode" id="cb27"><html><body><pre class="r">&gt; 
&gt; fit &lt;- glm(skips ~ Opening + Solder + Mask , data=solder, family=poisson)
&gt; stats::anova(fit, test='Chi')
Analysis of Deviance Table

Model: poisson, link: log

Response: skips

Terms added sequentially (first to last)

        Df Deviance Resid. Df Resid. Dev  Pr(&gt;Chi)    
NULL                      899     8788.2              
Opening  2   2920.5       897     5867.7 &lt; 2.2e-16 ***
Solder   1   1168.4       896     4699.3 &lt; 2.2e-16 ***
Mask     4   2015.7       892     2683.7 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
&gt; summary(fit)

Call:
glm(formula = skips ~ Opening + Solder + Mask, family = poisson, 
    data = solder)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-6.1251  -1.4720  -0.7826   0.5986   6.6031  

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -1.12220    0.07742  -14.50  &lt; 2e-16 ***
OpeningM     0.57161    0.05707   10.02  &lt; 2e-16 ***
OpeningS     1.81475    0.05044   35.98  &lt; 2e-16 ***
SolderThin   0.84682    0.03327   25.45  &lt; 2e-16 ***
MaskA3       0.51315    0.07098    7.23 4.83e-13 ***
MaskA6       1.81103    0.06609   27.40  &lt; 2e-16 ***
MaskB3       1.20225    0.06697   17.95  &lt; 2e-16 ***
MaskB6       1.86648    0.06310   29.58  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 8788.2  on 899  degrees of freedom
Residual deviance: 2683.7  on 892  degrees of freedom
AIC: 4802.2

Number of Fisher Scoring iterations: 5</pre></body></html></div>
<p>Overdispersion is when the Residual deviance is larger than the degrees of freedom. This can be tested, approximately using the following code. The goal is to have a p-value that is <span class="math inline">\(&gt;0.05\)</span>.</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r">&gt; 1-pchisq(fit$deviance, fit$df.residual)
[1] 0</pre></body></html></div>
<p>One possible solution is to use the quasipoisson family instead of the poisson family. This adjusts for the overdispersion.</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r">&gt; fit2 &lt;- glm(skips ~ Opening + Solder + Mask, data=solder, family=quasipoisson)
&gt; summary(fit2)

Call:
glm(formula = skips ~ Opening + Solder + Mask, family = quasipoisson, 
    data = solder)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-6.1251  -1.4720  -0.7826   0.5986   6.6031  

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -1.12220    0.13483  -8.323 3.19e-16 ***
OpeningM     0.57161    0.09939   5.751 1.22e-08 ***
OpeningS     1.81475    0.08784  20.660  &lt; 2e-16 ***
SolderThin   0.84682    0.05794  14.615  &lt; 2e-16 ***
MaskA3       0.51315    0.12361   4.151 3.62e-05 ***
MaskA6       1.81103    0.11510  15.735  &lt; 2e-16 ***
MaskB3       1.20225    0.11663  10.308  &lt; 2e-16 ***
MaskB6       1.86648    0.10989  16.984  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for quasipoisson family taken to be 3.033198)

    Null deviance: 8788.2  on 899  degrees of freedom
Residual deviance: 2683.7  on 892  degrees of freedom
AIC: NA

Number of Fisher Scoring iterations: 5</pre></body></html></div>
</div>
<div id="extract-data-using-broom-package-2" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package-2" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r">&gt; tidy(fit) # coefficients, p-values
# A tibble: 8 x 5
  term        estimate std.error statistic   p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)   -1.12     0.0774    -14.5  1.29e- 47
2 OpeningM       0.572    0.0571     10.0  1.29e- 23
3 OpeningS       1.81     0.0504     36.0  1.66e-283
4 SolderThin     0.847    0.0333     25.5  6.47e-143
5 MaskA3         0.513    0.0710      7.23 4.83e- 13
6 MaskA6         1.81     0.0661     27.4  2.45e-165
7 MaskB3         1.20     0.0670     18.0  4.55e- 72
8 MaskB6         1.87     0.0631     29.6  2.71e-192
&gt; 
&gt; glance(fit) # model summary statistics
# A tibble: 1 x 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1         8788.     899 -2393. 4802. 4841.    2684.         892   900</pre></body></html></div>
</div>
<div id="create-a-summary-table-using-modelsum-3" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-3" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb31"><html><body><pre class="r">&gt; summary(modelsum(skips~Opening + Solder + Mask, data=solder, family="quasipoisson"))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">RR</th>
<th align="left">CI.lower.RR</th>
<th align="left">CI.upper.RR</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.533</td>
<td align="left">1.179</td>
<td align="left">1.952</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Opening M</strong></td>
<td align="left">2.328</td>
<td align="left">1.733</td>
<td align="left">3.167</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Opening S</strong></td>
<td align="left">7.491</td>
<td align="left">5.780</td>
<td align="left">9.888</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">2.904</td>
<td align="left">2.423</td>
<td align="left">3.446</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Solder Thin</strong></td>
<td align="left">2.808</td>
<td align="left">2.295</td>
<td align="left">3.458</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">1.611</td>
<td align="left">1.135</td>
<td align="left">2.204</td>
<td align="left">0.005</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask A3</strong></td>
<td align="left">1.469</td>
<td align="left">0.995</td>
<td align="left">2.214</td>
<td align="left">0.059</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask A6</strong></td>
<td align="left">8.331</td>
<td align="left">5.839</td>
<td align="left">12.222</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask B3</strong></td>
<td align="left">3.328</td>
<td align="left">2.309</td>
<td align="left">4.920</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask B6</strong></td>
<td align="left">6.466</td>
<td align="left">4.598</td>
<td align="left">9.378</td>
<td align="left">&lt; 0.001</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb32"><html><body><pre class="r">&gt; summary(modelsum(skips~Opening + Solder + Mask, data=solder, family="poisson"))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">RR</th>
<th align="left">CI.lower.RR</th>
<th align="left">CI.upper.RR</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.533</td>
<td align="left">1.397</td>
<td align="left">1.678</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Opening M</strong></td>
<td align="left">2.328</td>
<td align="left">2.089</td>
<td align="left">2.599</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Opening S</strong></td>
<td align="left">7.491</td>
<td align="left">6.805</td>
<td align="left">8.267</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">2.904</td>
<td align="left">2.750</td>
<td align="left">3.065</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Solder Thin</strong></td>
<td align="left">2.808</td>
<td align="left">2.637</td>
<td align="left">2.992</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">1.611</td>
<td align="left">1.433</td>
<td align="left">1.804</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask A3</strong></td>
<td align="left">1.469</td>
<td align="left">1.280</td>
<td align="left">1.690</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask A6</strong></td>
<td align="left">8.331</td>
<td align="left">7.341</td>
<td align="left">9.487</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask B3</strong></td>
<td align="left">3.328</td>
<td align="left">2.923</td>
<td align="left">3.800</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask B6</strong></td>
<td align="left">6.466</td>
<td align="left">5.724</td>
<td align="left">7.331</td>
<td align="left">&lt; 0.001</td>
</tr>
</tbody>
</table>
</div>
<div id="example-2-fit-and-summarize-a-poisson-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-fit-and-summarize-a-poisson-regression-model" class="anchor"></a>Example 2: fit and summarize a Poisson regression model</h3>
<p>This second example uses the survival endpoint available in the <code>mockstudy</code> dataset. There is a close relationship between survival and Poisson models, and often it is easier to fit the model using Poisson regression, especially if you want to present absolute risk.</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r">&gt; # add .01 to the follow-up time (.01*1 day) in order to keep everyone in the analysis
&gt; fit &lt;- glm(fu.stat ~ offset(log(fu.time+.01)) + age + sex + arm, data=mockstudy, family=poisson)
&gt; summary(fit)

Call:
glm(formula = fu.stat ~ offset(log(fu.time + 0.01)) + age + sex + 
    arm, family = poisson, data = mockstudy)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-3.1188  -0.4041   0.3242   0.9727   4.3588  

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)  -5.875627   0.108984 -53.913  &lt; 2e-16 ***
age           0.003724   0.001705   2.184   0.0290 *  
sexFemale     0.027321   0.038575   0.708   0.4788    
armF: FOLFOX -0.335141   0.044600  -7.514 5.72e-14 ***
armG: IROX   -0.107776   0.050643  -2.128   0.0333 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 2113.5  on 1498  degrees of freedom
Residual deviance: 2048.0  on 1494  degrees of freedom
AIC: 5888.2

Number of Fisher Scoring iterations: 5
&gt; 1-pchisq(fit$deviance, fit$df.residual)
[1] 0
&gt; 
&gt; coef(coxph(Surv(fu.time,fu.stat) ~ age + sex + arm, data=mockstudy))
         age    sexFemale armF: FOLFOX   armG: IROX 
 0.004600011  0.039892735 -0.454650445 -0.140784996 
&gt; coef(fit)[-1]
         age    sexFemale armF: FOLFOX   armG: IROX 
 0.003723763  0.027320917 -0.335141090 -0.107775577 
&gt; 
&gt; # results from the Poisson model can then be described as risk ratios (similar to the hazard ratio)
&gt; exp(coef(fit)[-1])
         age    sexFemale armF: FOLFOX   armG: IROX 
   1.0037307    1.0276976    0.7152372    0.8978291 
&gt; 
&gt; # As before, we can model the dispersion which alters the standard error
&gt; fit2 &lt;- glm(fu.stat ~ offset(log(fu.time+.01)) + age + sex + arm, 
+             data=mockstudy, family=quasipoisson)
&gt; summary(fit2)

Call:
glm(formula = fu.stat ~ offset(log(fu.time + 0.01)) + age + sex + 
    arm, family = quasipoisson, data = mockstudy)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-3.1188  -0.4041   0.3242   0.9727   4.3588  

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  -5.875627   0.566666 -10.369   &lt;2e-16 ***
age           0.003724   0.008867   0.420    0.675    
sexFemale     0.027321   0.200572   0.136    0.892    
armF: FOLFOX -0.335141   0.231899  -1.445    0.149    
armG: IROX   -0.107776   0.263318  -0.409    0.682    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for quasipoisson family taken to be 27.03493)

    Null deviance: 2113.5  on 1498  degrees of freedom
Residual deviance: 2048.0  on 1494  degrees of freedom
AIC: NA

Number of Fisher Scoring iterations: 5</pre></body></html></div>
</div>
<div id="extract-data-using-broom-package-3" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package-3" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r">&gt; tidy(fit) ##coefficients, p-values
# A tibble: 5 x 5
  term         estimate std.error statistic  p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)  -5.88      0.109     -53.9   0.      
2 age           0.00372   0.00171     2.18  2.90e- 2
3 sexFemale     0.0273    0.0386      0.708 4.79e- 1
4 armF: FOLFOX -0.335     0.0446     -7.51  5.72e-14
5 armG: IROX   -0.108     0.0506     -2.13  3.33e- 2
&gt; 
&gt; glance(fit) ##model summary statistics
# A tibble: 1 x 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1         2114.    1498 -2939. 5888. 5915.    2048.        1494  1499</pre></body></html></div>
</div>
<div id="create-a-summary-table-using-modelsum-4" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-4" class="anchor"></a>Create a summary table using <code>modelsum</code>
</h3>
<p>Remember that the result from <code>modelsum</code> is different from the <code>fit</code> above. The <code>modelsum</code> summary shows the results for <code>age + offset(log(fu.time+.01))</code> then <code>sex + offset(log(fu.time+.01))</code> instead of <code>age + sex + arm + offset(log(fu.time+.01))</code>.</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r">&gt; summary(modelsum(fu.stat ~ age, adjust=~offset(log(fu.time+.01))+ sex + arm, 
+                  data=mockstudy, family=poisson))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">RR</th>
<th align="left">CI.lower.RR</th>
<th align="left">CI.upper.RR</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.003</td>
<td align="left">0.002</td>
<td align="left">0.003</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">1.004</td>
<td align="left">1.000</td>
<td align="left">1.007</td>
<td align="left">0.029</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.028</td>
<td align="left">0.953</td>
<td align="left">1.108</td>
<td align="left">0.479</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.715</td>
<td align="left">0.656</td>
<td align="left">0.781</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.898</td>
<td align="left">0.813</td>
<td align="left">0.991</td>
<td align="left">0.033</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="additional-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#additional-examples" class="anchor"></a>Additional Examples</h1>
<p>Here are multiple examples showing how to use some of the different options.</p>
<div id="change-summary-statistics-globally" class="section level2">
<h2 class="hasAnchor">
<a href="#change-summary-statistics-globally" class="anchor"></a>1. Change summary statistics globally</h2>
<p>There are standard settings for each type of model regarding what information is summarized in the table. This behavior can be modified using the modelsum.control function. In fact, you can save your standard settings and use that for future tables.</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r">&gt; mycontrols  &lt;- modelsum.control(gaussian.stats=c("estimate","std.error","adj.r.squared","Nmiss"),
+                                 show.adjust=FALSE, show.intercept=FALSE)                            
&gt; tab2 &lt;- modelsum(bmi ~ age, adjust=~sex, data=mockstudy, control=mycontrols)
&gt; summary(tab2)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr></tbody>
</table>
<p>You can also change these settings directly in the modelsum call.</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r">&gt; tab3 &lt;- modelsum(bmi ~  age, adjust=~sex, data=mockstudy,
+                  gaussian.stats=c("estimate","std.error","adj.r.squared","Nmiss"), 
+                  show.intercept=FALSE, show.adjust=FALSE)
&gt; summary(tab3)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr></tbody>
</table>
</div>
<div id="add-labels-to-independent-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#add-labels-to-independent-variables" class="anchor"></a>2. Add labels to independent variables</h2>
<p>In the above example, age is shown with a label (Age in Years), but sex is listed “as is”. This is because the data was created in SAS and in the SAS dataset, age had a label but sex did not. The label is stored as an attribute within R.</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r">&gt; ## Look at one variable's label
&gt; attr(mockstudy$age,'label')
[1] "Age in Years"
&gt; 
&gt; ## See all the variables with a label
&gt; unlist(lapply(mockstudy,'attr','label'))
                       age                        arm 
            "Age in Years"            "Treatment Arm" 
                      race                        bmi 
                    "Race" "Body Mass Index (kg/m^2)" 
&gt; 
&gt; ## or
&gt; cbind(sapply(mockstudy,attr,'label'))
            [,1]                      
case        NULL                      
age         "Age in Years"            
arm         "Treatment Arm"           
sex         NULL                      
race        "Race"                    
fu.time     NULL                      
fu.stat     NULL                      
ps          NULL                      
hgb         NULL                      
bmi         "Body Mass Index (kg/m^2)"
alk.phos    NULL                      
ast         NULL                      
mdquality.s NULL                      
age.ord     NULL                      </pre></body></html></div>
<p>If you want to add labels to other variables, there are a couple of options. First, you could add labels to the variables in your dataset.</p>
<div class="sourceCode" id="cb39"><html><body><pre class="r">&gt; attr(mockstudy$age,'label')  &lt;- 'Age, yrs'
&gt; 
&gt; tab1 &lt;- modelsum(bmi ~  age, adjust=~sex, data=mockstudy)
&gt; summary(tab1)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>You can also use the built-in <code>data.frame</code> method for <code>labels&lt;-</code>:</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r">&gt; labels(mockstudy)  &lt;- c(age = 'Age, yrs')
&gt; 
&gt; tab1 &lt;- modelsum(bmi ~  age, adjust=~sex, data=mockstudy)
&gt; summary(tab1)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>Another option is to add labels after you have created the table</p>
<div class="sourceCode" id="cb41"><html><body><pre class="r">&gt; mylabels &lt;- list(sexFemale = "Female", age ="Age, yrs")
&gt; summary(tab1, labelTranslations = mylabels)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>Alternatively, you can check the variable labels and manipulate them with a function called <code>labels</code>, which works on the <code>modelsum</code> object.</p>
<div class="sourceCode" id="cb42"><html><body><pre class="r">&gt; labels(tab1)
                       bmi                        age 
"Body Mass Index (kg/m^2)"                 "Age, yrs" 
                       sex 
              "sex Female" 
&gt; labels(tab1) &lt;- c(sexFemale="Female", age="Baseline Age (yrs)")
&gt; labels(tab1)
                       bmi                        age 
"Body Mass Index (kg/m^2)"       "Baseline Age (yrs)" 
                       sex 
                  "Female" </pre></body></html></div>
<div class="sourceCode" id="cb43"><html><body><pre class="r">&gt; summary(tab1)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Baseline Age (yrs)</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="dont-show-intercept-values" class="section level2">
<h2 class="hasAnchor">
<a href="#dont-show-intercept-values" class="anchor"></a>3. Don’t show intercept values</h2>
<div class="sourceCode" id="cb44"><html><body><pre class="r">&gt; summary(modelsum(age~mdquality.s+sex, data=mockstudy), show.intercept=FALSE)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>mdquality.s</strong></td>
<td align="left">-0.326</td>
<td align="left">1.093</td>
<td align="left">0.766</td>
<td align="left">-0.001</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-1.208</td>
<td align="left">0.610</td>
<td align="left">0.048</td>
<td align="left">0.002</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
</div>
<div id="dont-show-results-for-adjustment-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#dont-show-results-for-adjustment-variables" class="anchor"></a>4. Don’t show results for adjustment variables</h2>
<div class="sourceCode" id="cb45"><html><body><pre class="r">&gt; summary(modelsum(mdquality.s ~ age + bmi, data=mockstudy, adjust=~sex, family=binomial),
+         show.adjust=FALSE)  </pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.272</td>
<td align="left">3.831</td>
<td align="left">28.876</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.507</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.998</td>
<td align="left">0.981</td>
<td align="left">1.014</td>
<td align="left">0.776</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.814</td>
<td align="left">1.709</td>
<td align="left">13.221</td>
<td align="left">0.003</td>
<td align="left">0.550</td>
<td align="left">273</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.063</td>
<td align="left">0.220</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-multiple-variables-without-typing-them-out" class="section level2">
<h2 class="hasAnchor">
<a href="#summarize-multiple-variables-without-typing-them-out" class="anchor"></a>5. Summarize multiple variables without typing them out</h2>
<p>Often one wants to summarize a number of variables. Instead of typing by hand each individual variable, an alternative approach is to create a formula using the <code>paste</code> command with the <code>collapse="+"</code> option.</p>
<div class="sourceCode" id="cb46"><html><body><pre class="r">&gt; # create a vector specifying the variable names
&gt; myvars &lt;- names(mockstudy)
&gt; 
&gt; # select the 8th through the 12th
&gt; # paste them together, separated by the + sign
&gt; RHS &lt;- paste(myvars[8:12], collapse="+")
&gt; RHS</pre></body></html></div>
<p>[1] “ps+hgb+bmi+alk.phos+ast”</p>
<div class="sourceCode" id="cb47"><html><body><pre class="r">&gt; 
&gt; # create a formula using the as.formula function
&gt; as.formula(paste('mdquality.s ~ ', RHS))</pre></body></html></div>
<p>mdquality.s ~ ps + hgb + bmi + alk.phos + ast</p>
<div class="sourceCode" id="cb48"><html><body><pre class="r">&gt; 
&gt; # use the formula in the modelsum function
&gt; summary(modelsum(as.formula(paste('mdquality.s ~', RHS)), family=binomial, data=mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">14.628</td>
<td align="left">10.755</td>
<td align="left">20.399</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.620</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">0.461</td>
<td align="left">0.332</td>
<td align="left">0.639</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.236</td>
<td align="left">0.272</td>
<td align="left">5.560</td>
<td align="left">0.783</td>
<td align="left">0.573</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">1.176</td>
<td align="left">1.040</td>
<td align="left">1.334</td>
<td align="left">0.011</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.963</td>
<td align="left">1.818</td>
<td align="left">13.292</td>
<td align="left">0.002</td>
<td align="left">0.549</td>
<td align="left">273</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.062</td>
<td align="left">0.225</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.622</td>
<td align="left">7.687</td>
<td align="left">14.794</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.552</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="left">0.999</td>
<td align="left">0.998</td>
<td align="left">1.000</td>
<td align="left">0.159</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.936</td>
<td align="left">7.912</td>
<td align="left">15.232</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.545</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">0.995</td>
<td align="left">0.988</td>
<td align="left">1.001</td>
<td align="left">0.099</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>These steps can also be done using the <code>formulize</code> function.</p>
<div class="sourceCode" id="cb49"><html><body><pre class="r">&gt; ## The formulize function does the paste and as.formula steps
&gt; tmp &lt;- formulize('mdquality.s',myvars[8:10])
&gt; tmp</pre></body></html></div>
<p>mdquality.s ~ ps + hgb + bmi</p>
<div class="sourceCode" id="cb50"><html><body><pre class="r">&gt; 
&gt; ## More complex formulas could also be written using formulize
&gt; tmp2 &lt;- formulize('mdquality.s',c('ps','hgb','sqrt(bmi)'))
&gt; 
&gt; ## use the formula in the modelsum function
&gt; summary(modelsum(tmp, data=mockstudy, family=binomial))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">14.628</td>
<td align="left">10.755</td>
<td align="left">20.399</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.620</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">0.461</td>
<td align="left">0.332</td>
<td align="left">0.639</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.236</td>
<td align="left">0.272</td>
<td align="left">5.560</td>
<td align="left">0.783</td>
<td align="left">0.573</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">1.176</td>
<td align="left">1.040</td>
<td align="left">1.334</td>
<td align="left">0.011</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.963</td>
<td align="left">1.818</td>
<td align="left">13.292</td>
<td align="left">0.002</td>
<td align="left">0.549</td>
<td align="left">273</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.062</td>
<td align="left">0.225</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="subset-the-dataset-used-in-the-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#subset-the-dataset-used-in-the-analysis" class="anchor"></a>6. Subset the dataset used in the analysis</h2>
<p>Here are two ways to get the same result (limit the analysis to subjects age&gt;50 and in the F: FOLFOX treatment group).</p>
<ul>
<li>The first approach uses the subset function applied to the dataset <code>mockstudy</code>. This example also selects a subset of variables. The <code>modelsum</code> function is then applied to this subsetted data.</li>
</ul>
<div class="sourceCode" id="cb51"><html><body><pre class="r">&gt; newdata &lt;- subset(mockstudy, subset=age&gt;50 &amp; arm=='F: FOLFOX', select = c(age,sex, bmi:alk.phos))
&gt; dim(mockstudy)
[1] 1499   14
&gt; table(mockstudy$arm)

   A: IFL F: FOLFOX   G: IROX 
      428       691       380 
&gt; dim(newdata)
[1] 557   4
&gt; names(newdata)
[1] "age"      "sex"      "bmi"      "alk.phos"</pre></body></html></div>
<div class="sourceCode" id="cb52"><html><body><pre class="r">&gt; summary(modelsum(alk.phos ~ ., data=newdata))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">122.577</td>
<td align="left">46.924</td>
<td align="left">0.009</td>
<td align="left">-0.001</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>age</strong></td>
<td align="left">0.619</td>
<td align="left">0.719</td>
<td align="left">0.390</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">164.814</td>
<td align="left">7.673</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-5.497</td>
<td align="left">12.118</td>
<td align="left">0.650</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">238.658</td>
<td align="left">33.705</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.010</td>
<td align="left">119</td>
</tr>
<tr class="even">
<td align="left"><strong>bmi</strong></td>
<td align="left">-2.776</td>
<td align="left">1.207</td>
<td align="left">0.022</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<ul>
<li>The second approach does the same analysis but uses the subset argument within <code>modelsum</code> to subset the data.</li>
</ul>
<div class="sourceCode" id="cb53"><html><body><pre class="r">&gt; summary(modelsum(log(alk.phos) ~ sex + ps + bmi, subset=age&gt;50 &amp; arm=="F: FOLFOX", data=mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.872</td>
<td align="left">0.039</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.005</td>
<td align="left">0.062</td>
<td align="left">0.931</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.770</td>
<td align="left">0.040</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.027</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">0.183</td>
<td align="left">0.050</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">5.207</td>
<td align="left">0.172</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.007</td>
<td align="left">119</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">-0.012</td>
<td align="left">0.006</td>
<td align="left">0.044</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb54"><html><body><pre class="r">&gt; summary(modelsum(alk.phos ~ ps + bmi, adjust=~sex, subset = age&gt;50 &amp; bmi&lt;24, data=mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">178.812</td>
<td align="left">14.550</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.007</td>
<td align="left">77</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">20.834</td>
<td align="left">13.440</td>
<td align="left">0.122</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-17.542</td>
<td align="left">16.656</td>
<td align="left">0.293</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">373.008</td>
<td align="left">104.272</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.009</td>
<td align="left">77</td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">-8.239</td>
<td align="left">4.727</td>
<td align="left">0.083</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-24.058</td>
<td align="left">16.855</td>
<td align="left">0.155</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb55"><html><body><pre class="r">&gt; summary(modelsum(alk.phos ~ ps + bmi, adjust=~sex, subset=1:30, data=mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">169.112</td>
<td align="left">57.013</td>
<td align="left">0.006</td>
<td align="left">0.294</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">254.901</td>
<td align="left">68.100</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">49.566</td>
<td align="left">67.643</td>
<td align="left">0.470</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">453.070</td>
<td align="left">200.651</td>
<td align="left">0.033</td>
<td align="left">-0.049</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">-5.993</td>
<td align="left">7.408</td>
<td align="left">0.426</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-22.308</td>
<td align="left">79.776</td>
<td align="left">0.782</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="create-combinations-of-variables-on-the-fly" class="section level2">
<h2 class="hasAnchor">
<a href="#create-combinations-of-variables-on-the-fly" class="anchor"></a>7. Create combinations of variables on the fly</h2>
<div class="sourceCode" id="cb56"><html><body><pre class="r">&gt; ## create a variable combining the levels of mdquality.s and sex
&gt; with(mockstudy, table(interaction(mdquality.s,sex)))

  0.Male   1.Male 0.Female 1.Female 
      77      686       47      437 </pre></body></html></div>
<div class="sourceCode" id="cb57"><html><body><pre class="r">&gt; summary(modelsum(age ~ interaction(mdquality.s,sex), data=mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">59.714</td>
<td align="left">1.314</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.003</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>interaction(mdquality.s, sex) 1.Male</strong></td>
<td align="left">0.730</td>
<td align="left">1.385</td>
<td align="left">0.598</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>interaction(mdquality.s, sex) 0.Female</strong></td>
<td align="left">0.988</td>
<td align="left">2.134</td>
<td align="left">0.643</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>interaction(mdquality.s, sex) 1.Female</strong></td>
<td align="left">-1.021</td>
<td align="left">1.425</td>
<td align="left">0.474</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="transform-variables-on-the-fly" class="section level2">
<h2 class="hasAnchor">
<a href="#transform-variables-on-the-fly" class="anchor"></a>8. Transform variables on the fly</h2>
<p>Certain transformations need to be surrounded by <code><a href="https://rdrr.io/r/base/AsIs.html">I()</a></code> so that R knows to treat it as a variable transformation and not some special model feature. If the transformation includes any of the symbols <code>/ - + ^ *</code> then surround the new variable by <code><a href="https://rdrr.io/r/base/AsIs.html">I()</a></code>.</p>
<div class="sourceCode" id="cb58"><html><body><pre class="r">&gt; summary(modelsum(arm=="F: FOLFOX" ~ I(age/10) + log(bmi) + mdquality.s,
+                  data=mockstudy, family=binomial))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.656</td>
<td align="left">0.382</td>
<td align="left">1.124</td>
<td align="left">0.126</td>
<td align="left">0.514</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">1.045</td>
<td align="left">0.957</td>
<td align="left">1.142</td>
<td align="left">0.326</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.633</td>
<td align="left">0.108</td>
<td align="left">3.698</td>
<td align="left">0.611</td>
<td align="left">0.508</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.092</td>
<td align="left">0.638</td>
<td align="left">1.867</td>
<td align="left">0.748</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.722</td>
<td align="left">0.503</td>
<td align="left">1.029</td>
<td align="left">0.074</td>
<td align="left">0.502</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>mdquality.s</strong></td>
<td align="left">1.045</td>
<td align="left">0.719</td>
<td align="left">1.527</td>
<td align="left">0.819</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="change-the-ordering-of-the-variables-or-delete-a-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#change-the-ordering-of-the-variables-or-delete-a-variable" class="anchor"></a>9. Change the ordering of the variables or delete a variable</h2>
<div class="sourceCode" id="cb59"><html><body><pre class="r">&gt; mytab &lt;- modelsum(bmi ~ sex + alk.phos + age, data=mockstudy)
&gt; mytab2 &lt;- mytab[c('age','sex','alk.phos')]
&gt; summary(mytab2)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.944</td>
<td align="left">0.253</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.011</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="left">-0.005</td>
<td align="left">0.001</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb60"><html><body><pre class="r">&gt; summary(mytab[c('age','sex')])</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb61"><html><body><pre class="r">&gt; summary(mytab[c(3,1)])</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="merge-two-modelsum-objects-together" class="section level2">
<h2 class="hasAnchor">
<a href="#merge-two-modelsum-objects-together" class="anchor"></a>10. Merge two <code>modelsum</code> objects together</h2>
<p>It is possible to merge two modelsum objects so that they print out together, however you need to pay attention to the columns that are being displayed. It is sometimes easier to combine two models of the same family (such as two sets of linear models). Overlapping y-variables will have their x-variables concatenated, and (if <code>all=TRUE</code>) non-overlapping y-variables will have their tables printed separately.</p>
<div class="sourceCode" id="cb62"><html><body><pre class="r">&gt; ## demographics
&gt; tab1 &lt;- modelsum(bmi ~ sex + age, data=mockstudy)
&gt; ## lab data
&gt; tab2 &lt;- modelsum(mdquality.s ~ hgb + alk.phos, data=mockstudy, family=binomial)
&gt;                 
&gt; tab12 &lt;- merge(tab1, tab2, all = TRUE)
&gt; class(tab12)</pre></body></html></div>
<p>[1] “modelsum” “arsenal_table”</p>
<div class="sourceCode" id="cb63"><html><body><pre class="r">&gt; summary(tab12)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.236</td>
<td align="left">0.272</td>
<td align="left">5.560</td>
<td align="left">0.783</td>
<td align="left">0.573</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">1.176</td>
<td align="left">1.040</td>
<td align="left">1.334</td>
<td align="left">0.011</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.622</td>
<td align="left">7.687</td>
<td align="left">14.794</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.552</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="left">0.999</td>
<td align="left">0.998</td>
<td align="left">1.000</td>
<td align="left">0.159</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="add-a-title-to-the-table" class="section level2">
<h2 class="hasAnchor">
<a href="#add-a-title-to-the-table" class="anchor"></a>11. Add a title to the table</h2>
<p>When creating a pdf the tables are automatically numbered and the title appears below the table. In Word and HTML, the titles appear un-numbered and above the table.</p>
<div class="sourceCode" id="cb64"><html><body><pre class="r">&gt; t1 &lt;- modelsum(bmi ~ sex + age, data=mockstudy)
&gt; summary(t1, title='Demographics')</pre></body></html></div>
<table class="table">
<caption>Demographics</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="modify-how-missing-values-are-treated" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-how-missing-values-are-treated" class="anchor"></a>12. Modify how missing values are treated</h2>
<p>Depending on the report you are writing you have the following options:</p>
<ul>
<li><p>Use all values available for each variable</p></li>
<li><p>Use only those subjects who have measurements available for all the variables</p></li>
</ul>
<div class="sourceCode" id="cb65"><html><body><pre class="r">&gt; ## look at how many missing values there are for each variable
&gt; apply(is.na(mockstudy),2,sum)
       case         age         arm         sex        race     fu.time 
          0           0           0           0           7           0 
    fu.stat          ps         hgb         bmi    alk.phos         ast 
          0         266         266          33         266         266 
mdquality.s     age.ord 
        252           0 </pre></body></html></div>
<div class="sourceCode" id="cb66"><html><body><pre class="r">&gt; ## Show how many subjects have each variable (non-missing)
&gt; summary(modelsum(bmi ~ ast + age, data=mockstudy,
+                 control=modelsum.control(gaussian.stats=c("N","estimate"))))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
<td align="left">1205</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">1466</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb67"><html><body><pre class="r">&gt; 
&gt; ## Always list the number of missing values
&gt; summary(modelsum(bmi ~ ast + age, data=mockstudy,
+                 control=modelsum.control(gaussian.stats=c("Nmiss2","estimate"))))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">Nmiss2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb68"><html><body><pre class="r">&gt; 
&gt; ## Only show the missing values if there are some (default)
&gt; summary(modelsum(bmi ~ ast + age, data=mockstudy, 
+                 control=modelsum.control(gaussian.stats=c("Nmiss","estimate"))))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb69"><html><body><pre class="r">&gt; 
&gt; ## Don't show N at all
&gt; summary(modelsum(bmi ~ ast + age, data=mockstudy, 
+                 control=modelsum.control(gaussian.stats=c("estimate"))))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
</tr>
</tbody>
</table>
</div>
<div id="modify-the-number-of-digits-used" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-the-number-of-digits-used" class="anchor"></a>13. Modify the number of digits used</h2>
<p>Within modelsum.control function there are 3 options for controlling the number of significant digits shown.</p>
<ul>
<li><p>digits: controls the number of digits after the decimal point for continuous values</p></li>
<li><p>digits.ratio: controls the number of digits after the decimal point for continuous values</p></li>
<li><p>digits.p: controls the number of digits after the decimal point for continuous values</p></li>
</ul>
<div class="sourceCode" id="cb70"><html><body><pre class="r">&gt; summary(modelsum(bmi ~ sex + age + fu.time, data=mockstudy), digits=4, digits.test=2)
Warning: Using 'digits.test = ' is deprecated. Use 'digits.p = ' instead.</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.4915</td>
<td align="left">0.1813</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.0036</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.7311</td>
<td align="left">0.2903</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.4237</td>
<td align="left">0.7521</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.0001</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.0130</td>
<td align="left">0.0123</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.4937</td>
<td align="left">0.2447</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.0079</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>fu.time</strong></td>
<td align="left">0.0011</td>
<td align="left">0.0003</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="use-case-weights-in-the-models" class="section level2">
<h2 class="hasAnchor">
<a href="#use-case-weights-in-the-models" class="anchor"></a>14. Use case-weights in the models</h2>
<p>Occasionally it is of interest to fit models using case weights. The <code>modelsum</code> function allows you to pass on the weights to the models and it will do the appropriate fit.</p>
<div class="sourceCode" id="cb71"><html><body><pre class="r">&gt; mockstudy$agegp &lt;- cut(mockstudy$age, breaks=c(18,50,60,70,90), right=FALSE)
&gt; 
&gt; ## create weights based on agegp and sex distribution
&gt; tab1 &lt;- with(mockstudy,table(agegp, sex))
&gt; tab1
         sex
agegp     Male Female
  [18,50)  152    110
  [50,60)  258    178
  [60,70)  295    173
  [70,90)  211    122
&gt; tab2 &lt;- with(mockstudy, table(agegp, sex, arm))
&gt; gpwts &lt;- rep(tab1, length(unique(mockstudy$arm)))/tab2
&gt; 
&gt; ## apply weights to subjects
&gt; index &lt;- with(mockstudy, cbind(as.numeric(agegp), as.numeric(sex), as.numeric(as.factor(arm)))) 
&gt; mockstudy$wts &lt;- gpwts[index]
&gt; 
&gt; ## show weights by treatment arm group
&gt; tapply(mockstudy$wts,mockstudy$arm, summary)
$`A: IFL`
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.923   3.225   3.548   3.502   3.844   4.045 

$`F: FOLFOX`
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.033   2.070   2.201   2.169   2.263   2.303 

$`G: IROX`
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  3.667   3.734   4.023   3.945   4.031   4.471 </pre></body></html></div>
<div class="sourceCode" id="cb72"><html><body><pre class="r">&gt; mockstudy$newvarA &lt;- as.numeric(mockstudy$arm=='A: IFL')
&gt; tab1 &lt;- modelsum(newvarA ~ ast + bmi + hgb, data=mockstudy, subset=(arm !='G: IROX'), 
+                  family=binomial)
&gt; summary(tab1, title='No Case Weights used')</pre></body></html></div>
<table class="table">
<caption>No Case Weights used</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.590</td>
<td align="left">0.473</td>
<td align="left">0.735</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.550</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">1.003</td>
<td align="left">0.998</td>
<td align="left">1.008</td>
<td align="left">0.258</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.578</td>
<td align="left">0.306</td>
<td align="left">1.093</td>
<td align="left">0.091</td>
<td align="left">0.500</td>
<td align="left">29</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.003</td>
<td align="left">0.980</td>
<td align="left">1.026</td>
<td align="left">0.808</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.006</td>
<td align="left">0.386</td>
<td align="left">2.631</td>
<td align="left">0.990</td>
<td align="left">0.514</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">0.965</td>
<td align="left">0.894</td>
<td align="left">1.043</td>
<td align="left">0.372</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb73"><html><body><pre class="r">&gt; 
&gt; suppressWarnings({
+ tab2 &lt;- modelsum(newvarA ~ ast + bmi + hgb, data=mockstudy, subset=(arm !='G: IROX'), 
+                  weights=wts, family=binomial)
+ summary(tab2, title='Case Weights used')
+ })</pre></body></html></div>
<table class="table">
<caption>Case Weights used</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.956</td>
<td align="left">0.837</td>
<td align="left">1.091</td>
<td align="left">0.504</td>
<td align="left">0.550</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">1.003</td>
<td align="left">1.000</td>
<td align="left">1.006</td>
<td align="left">0.068</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.957</td>
<td align="left">0.658</td>
<td align="left">1.393</td>
<td align="left">0.820</td>
<td align="left">0.500</td>
<td align="left">29</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.002</td>
<td align="left">0.988</td>
<td align="left">1.016</td>
<td align="left">0.780</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.829</td>
<td align="left">1.031</td>
<td align="left">3.248</td>
<td align="left">0.039</td>
<td align="left">0.514</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">0.956</td>
<td align="left">0.913</td>
<td align="left">1.001</td>
<td align="left">0.058</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="use-modelsum-within-an-sweave-document" class="section level2">
<h2 class="hasAnchor">
<a href="#use-modelsum-within-an-sweave-document" class="anchor"></a>15. Use <code>modelsum</code> within an Sweave document</h2>
<p>For those users who wish to create tables within an Sweave document, the following code seems to work.</p>
<pre><code>\documentclass{article}

\usepackage{longtable}
\usepackage{pdfpages}

\begin{document}

\section{Read in Data}
&lt;&lt;echo=TRUE&gt;&gt;=
require(arsenal)
require(knitr)
require(rmarkdown)
data(mockstudy)

tab1 &lt;- modelsum(bmi~sex+age, data=mockstudy)
@

\section{Convert Summary.modelsum to LaTeX}
&lt;&lt;echo=TRUE, results='hide', message=FALSE&gt;&gt;=
capture.output(summary(tab1), file="Test.md")

## Convert R Markdown Table to LaTeX
render("Test.md", pdf_document(keep_tex=TRUE))
@ 

\includepdf{Test.pdf}

\end{document}</code></pre>
</div>
<div id="export-modelsum-results-to-a--csv-file" class="section level2">
<h2 class="hasAnchor">
<a href="#export-modelsum-results-to-a--csv-file" class="anchor"></a>16. Export <code>modelsum</code> results to a .CSV file</h2>
<p>When looking at multiple variables it is sometimes useful to export the results to a csv file. The <code>as.data.frame</code> function creates a data frame object that can be exported or further manipulated within R.</p>
<div class="sourceCode" id="cb75"><html><body><pre class="r">&gt; summary(tab2, text=T)


|                         |OR    |CI.lower.OR |CI.upper.OR |p.value |concordance |Nmiss |
|:------------------------|:-----|:-----------|:-----------|:-------|:-----------|:-----|
|(Intercept)              |0.956 |0.837       |1.091       |0.504   |0.550       |210   |
|ast                      |1.003 |1.000       |1.006       |0.068   |            |      |
|(Intercept)              |0.957 |0.658       |1.393       |0.820   |0.500       |29    |
|Body Mass Index (kg/m^2) |1.002 |0.988       |1.016       |0.780   |            |      |
|(Intercept)              |1.829 |1.031       |3.248       |0.039   |0.514       |210   |
|hgb                      |0.956 |0.913       |1.001       |0.058   |            |      |
&gt; tmp &lt;- as.data.frame(summary(tab2, text = TRUE))
&gt; tmp
                              OR CI.lower.OR CI.upper.OR p.value concordance
1              (Intercept) 0.956       0.837       1.091   0.504       0.550
2                      ast 1.003       1.000       1.006   0.068            
3              (Intercept) 0.957       0.658       1.393   0.820       0.500
4 Body Mass Index (kg/m^2) 1.002       0.988       1.016   0.780            
5              (Intercept) 1.829       1.031       3.248   0.039       0.514
6                      hgb 0.956       0.913       1.001   0.058            
  Nmiss
1   210
2      
3    29
4      
5   210
6      
&gt; # write.csv(tmp, '/my/path/here/mymodel.csv')</pre></body></html></div>
</div>
<div id="write-modelsum-object-to-a-separate-word-or-html-file" class="section level2">
<h2 class="hasAnchor">
<a href="#write-modelsum-object-to-a-separate-word-or-html-file" class="anchor"></a>17. Write <code>modelsum</code> object to a separate Word or HTML file</h2>
<div class="sourceCode" id="cb76"><html><body><pre class="r">&gt; ## write to an HTML document
&gt; write2html(tab2, "~/ibm/trash.html")
&gt; 
&gt; ## write to a Word document
&gt; write2word(tab2, "~/ibm/trash.doc", title="My table in Word")</pre></body></html></div>
</div>
<div id="use-modelsum-in-r-shiny" class="section level2">
<h2 class="hasAnchor">
<a href="#use-modelsum-in-r-shiny" class="anchor"></a>18. Use <code>modelsum</code> in R Shiny</h2>
<p>The easiest way to output a <code><a href="../reference/modelsum.html">modelsum()</a></code> object in an R Shiny app is to use the <code>tableOutput()</code> UI in combination with the <code>renderTable()</code> server function and <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame(summary(modelsum()))</a></code>:</p>
<div class="sourceCode" id="cb77"><html><body><pre class="r">&gt; # A standalone shiny app
&gt; library(shiny)
&gt; library(arsenal)
&gt; data(mockstudy)
&gt; 
&gt; shinyApp(
+   ui = fluidPage(tableOutput("table")),
+   server = function(input, output) {
+     output$table &lt;- renderTable({
+       as.data.frame(summary(modelsum(age ~ sex, data = mockstudy), text = "html"))
+     }, sanitize.text.function = function(x) x)
+   }
+ )</pre></body></html></div>
<p>This can be especially powerful if you feed the selections from a <code>selectInput(multiple = TRUE)</code> into <code><a href="../reference/formulize.html">formulize()</a></code> to make the table dynamic!</p>
</div>
<div id="use-modelsum-in-bookdown" class="section level2">
<h2 class="hasAnchor">
<a href="#use-modelsum-in-bookdown" class="anchor"></a>23. Use <code>modelsum</code> in bookdown</h2>
<p>Since the backbone of <code><a href="../reference/modelsum.html">modelsum()</a></code> is <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable()</a></code>, tables still render well in bookdown. However, <code>print.summary.modelsum()</code> doesn’t use the <code>caption=</code> argument of <code>kable()</code>, so some tables may not have a properly numbered caption. To fix this, use the method described <a href="https://bookdown.org/yihui/bookdown/tables.html">on the bookdown site</a> to give the table a tag/ID.</p>
<div class="sourceCode" id="cb78"><html><body><pre class="r">&gt; summary(modelsum(age ~ sex, data = mockstudy), title="(\\#tab:mytableby) Caption here")</pre></body></html></div>
</div>
<div id="model-multiple-endpoints" class="section level2">
<h2 class="hasAnchor">
<a href="#model-multiple-endpoints" class="anchor"></a>24. Model multiple endpoints</h2>
<p>You can now use <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> on the left-hand side of <code><a href="../reference/modelsum.html">modelsum()</a></code> to give multiple endpoints. Note that only one “family” can be specified this way (use <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> instead if you want multiple families).</p>
<div class="sourceCode" id="cb79"><html><body><pre class="r">&gt; summary(modelsum(list(age, hgb) ~ bmi + sex, adjust = ~ arm, data = mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">58.053</td>
<td align="left">1.614</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.001</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.059</td>
<td align="left">0.055</td>
<td align="left">0.289</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.593</td>
<td align="left">0.718</td>
<td align="left">0.408</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.171</td>
<td align="left">0.819</td>
<td align="left">0.834</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">60.108</td>
<td align="left">0.597</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-1.232</td>
<td align="left">0.611</td>
<td align="left">0.044</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.693</td>
<td align="left">0.709</td>
<td align="left">0.329</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.148</td>
<td align="left">0.812</td>
<td align="left">0.855</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">11.565</td>
<td align="left">0.267</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.005</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.028</td>
<td align="left">0.009</td>
<td align="left">0.003</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.046</td>
<td align="left">0.118</td>
<td align="left">0.699</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.065</td>
<td align="left">0.133</td>
<td align="left">0.624</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">12.505</td>
<td align="left">0.096</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.032</td>
<td align="left">266</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.642</td>
<td align="left">0.099</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.131</td>
<td align="left">0.115</td>
<td align="left">0.256</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.131</td>
<td align="left">0.130</td>
<td align="left">0.313</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>To avoid confusion about which table is which endpoint, you can set <code>term.name=TRUE</code> in <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>. This takes the labels for each endpoint and puts them in the top-left of the table.</p>
<div class="sourceCode" id="cb80"><html><body><pre class="r">&gt; summary(modelsum(list(age, hgb) ~ bmi + sex, adjust = ~ arm, data = mockstudy), term.name = TRUE)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">Age, yrs</th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">58.053</td>
<td align="left">1.614</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.001</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.059</td>
<td align="left">0.055</td>
<td align="left">0.289</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.593</td>
<td align="left">0.718</td>
<td align="left">0.408</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.171</td>
<td align="left">0.819</td>
<td align="left">0.834</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">60.108</td>
<td align="left">0.597</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-1.232</td>
<td align="left">0.611</td>
<td align="left">0.044</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.693</td>
<td align="left">0.709</td>
<td align="left">0.329</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.148</td>
<td align="left">0.812</td>
<td align="left">0.855</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left">hgb</th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">11.565</td>
<td align="left">0.267</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.005</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.028</td>
<td align="left">0.009</td>
<td align="left">0.003</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.046</td>
<td align="left">0.118</td>
<td align="left">0.699</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.065</td>
<td align="left">0.133</td>
<td align="left">0.624</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">12.505</td>
<td align="left">0.096</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.032</td>
<td align="left">266</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.642</td>
<td align="left">0.099</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.131</td>
<td align="left">0.115</td>
<td align="left">0.256</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.131</td>
<td align="left">0.130</td>
<td align="left">0.313</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="model-data-by-a-non-test-group-strata" class="section level2">
<h2 class="hasAnchor">
<a href="#model-data-by-a-non-test-group-strata" class="anchor"></a>25. Model data by a non-test group (strata)</h2>
<p>You can also specify a grouping variable that doesn’t get tested (but instead separates results): a <em>strata</em> variable.</p>
<div class="sourceCode" id="cb81"><html><body><pre class="r">&gt; summary(modelsum(list(age, hgb) ~ bmi + sex, strata = arm, data = mockstudy))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">Treatment Arm</th>
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A: IFL</td>
<td align="left">(Intercept)</td>
<td align="left">59.147</td>
<td align="left">2.783</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">9</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.019</td>
<td align="left">0.100</td>
<td align="left">0.851</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">59.903</td>
<td align="left">0.683</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.651</td>
<td align="left">1.151</td>
<td align="left">0.572</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">F: FOLFOX</td>
<td align="left">(Intercept)</td>
<td align="left">57.194</td>
<td align="left">2.407</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">20</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.112</td>
<td align="left">0.087</td>
<td align="left">0.197</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">60.691</td>
<td align="left">0.574</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.962</td>
<td align="left">0.901</td>
<td align="left">0.286</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">G: IROX</td>
<td align="left">(Intercept)</td>
<td align="left">59.188</td>
<td align="left">2.873</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.003</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.023</td>
<td align="left">0.104</td>
<td align="left">0.822</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">60.702</td>
<td align="left">0.759</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.007</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-2.346</td>
<td align="left">1.200</td>
<td align="left">0.051</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left">Treatment Arm</th>
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A: IFL</td>
<td align="left">(Intercept)</td>
<td align="left">11.247</td>
<td align="left">0.459</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.013</td>
<td align="left">77</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.039</td>
<td align="left">0.017</td>
<td align="left">0.018</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">12.527</td>
<td align="left">0.109</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.037</td>
<td align="left">69</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.703</td>
<td align="left">0.182</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">F: FOLFOX</td>
<td align="left">(Intercept)</td>
<td align="left">11.661</td>
<td align="left">0.414</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">157</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.026</td>
<td align="left">0.015</td>
<td align="left">0.085</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">12.661</td>
<td align="left">0.095</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.037</td>
<td align="left">141</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.707</td>
<td align="left">0.151</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">G: IROX</td>
<td align="left">(Intercept)</td>
<td align="left">11.874</td>
<td align="left">0.457</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">60</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.019</td>
<td align="left">0.017</td>
<td align="left">0.264</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">12.565</td>
<td align="left">0.121</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.016</td>
<td align="left">56</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.470</td>
<td align="left">0.188</td>
<td align="left">0.013</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="add-multiple-sets-of-adjustors-to-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#add-multiple-sets-of-adjustors-to-the-model" class="anchor"></a>26. Add multiple sets of adjustors to the model</h2>
<p>By putting multiple formulas into a list, you can use multiple sets of adjustors. Use <code>~ 1</code> or <code>NULL</code> for an “unadjusted” model. By using the <code>adjustment.names=TRUE</code> argument and giving names to your adjustor sets in the list, you can name the various analyses.</p>
<div class="sourceCode" id="cb82"><html><body><pre class="r">&gt; adj.list &lt;- list(
+   Unadjusted = ~ 1, # can also specify NULL here
+   "Adjusted for Arm" = ~ arm
+ )
&gt; multi.adjust &lt;- modelsum(list(age, bmi) ~ fu.time + ast, adjust = adj.list, data = mockstudy)
&gt; summary(multi.adjust, adjustment.names = TRUE)


|adjustment       |                            |estimate |std.error |p.value |adj.r.squared |Nmiss |
|:----------------|:---------------------------|:--------|:---------|:-------|:-------------|:-----|
|Unadjusted       |(Intercept)                 |60.766   |0.512     |&lt; 0.001 |0.002         |0     |
|                 |**fu.time**                 |-0.001   |0.001     |0.061   |              |      |
|Adjusted for Arm |(Intercept)                 |60.420   |0.663     |&lt; 0.001 |0.002         |0     |
|                 |**fu.time**                 |-0.001   |0.001     |0.039   |              |      |
|                 |**Treatment Arm F: FOLFOX** |0.868    |0.717     |0.227   |              |      |
|                 |**Treatment Arm G: IROX**   |0.163    |0.812     |0.841   |              |      |
|Unadjusted       |(Intercept)                 |61.343   |0.547     |&lt; 0.001 |0.004         |266   |
|                 |**ast**                     |-0.030   |0.012     |0.014   |              |      |
|Adjusted for Arm |(Intercept)                 |61.236   |0.757     |&lt; 0.001 |0.005         |266   |
|                 |**ast**                     |-0.030   |0.012     |0.015   |              |      |
|                 |**Treatment Arm F: FOLFOX** |0.653    |0.779     |0.403   |              |      |
|                 |**Treatment Arm G: IROX**   |-0.728   |0.880     |0.408   |              |      |


|adjustment       |                            |estimate |std.error |p.value |adj.r.squared |Nmiss |
|:----------------|:---------------------------|:--------|:---------|:-------|:-------------|:-----|
|Unadjusted       |(Intercept)                 |26.494   |0.245     |&lt; 0.001 |0.008         |33    |
|                 |**fu.time**                 |0.001    |0.000     |&lt; 0.001 |              |      |
|Adjusted for Arm |(Intercept)                 |26.658   |0.317     |&lt; 0.001 |0.007         |33    |
|                 |**fu.time**                 |0.001    |0.000     |&lt; 0.001 |              |      |
|                 |**Treatment Arm F: FOLFOX** |-0.280   |0.341     |0.413   |              |      |
|                 |**Treatment Arm G: IROX**   |-0.237   |0.385     |0.538   |              |      |
|Unadjusted       |(Intercept)                 |27.331   |0.259     |&lt; 0.001 |-0.000        |294   |
|                 |**ast**                     |-0.005   |0.006     |0.433   |              |      |
|Adjusted for Arm |(Intercept)                 |27.291   |0.356     |&lt; 0.001 |-0.001        |294   |
|                 |**ast**                     |-0.004   |0.006     |0.440   |              |      |
|                 |**Treatment Arm F: FOLFOX** |0.181    |0.368     |0.623   |              |      |
|                 |**Treatment Arm G: IROX**   |-0.161   |0.414     |0.698   |              |      |
&gt; summary(multi.adjust, adjustment.names = TRUE, show.intercept = FALSE, show.adjust = FALSE)


|adjustment       |            |estimate |std.error |p.value |adj.r.squared |Nmiss |
|:----------------|:-----------|:--------|:---------|:-------|:-------------|:-----|
|Unadjusted       |**fu.time** |-0.001   |0.001     |0.061   |0.002         |0     |
|Adjusted for Arm |**fu.time** |-0.001   |0.001     |0.039   |0.002         |0     |
|Unadjusted       |**ast**     |-0.030   |0.012     |0.014   |0.004         |266   |
|Adjusted for Arm |**ast**     |-0.030   |0.012     |0.015   |0.005         |266   |


|adjustment       |            |estimate |std.error |p.value |adj.r.squared |Nmiss |
|:----------------|:-----------|:--------|:---------|:-------|:-------------|:-----|
|Unadjusted       |**fu.time** |0.001    |0.000     |&lt; 0.001 |0.008         |33    |
|Adjusted for Arm |**fu.time** |0.001    |0.000     |&lt; 0.001 |0.007         |33    |
|Unadjusted       |**ast**     |-0.005   |0.006     |0.433   |-0.000        |294   |
|Adjusted for Arm |**ast**     |-0.004   |0.006     |0.440   |-0.001        |294   |</pre></body></html></div>
</div>
</div>
<div id="available-function-options" class="section level1">
<h1 class="hasAnchor">
<a href="#available-function-options" class="anchor"></a>Available Function Options</h1>
<div id="summary-statistics" class="section level2">
<h2 class="hasAnchor">
<a href="#summary-statistics" class="anchor"></a>Summary statistics</h2>
<p>The available summary statistics, by varible type, are:</p>
<ul>
<li>
<code>ordinal</code>: Ordinal logistic regression models
<ul>
<li>default: <code>Nmiss, OR, CI.lower.OR, CI.upper.OR, p.value</code>
</li>
<li>optional: <code>estimate, CI.OR, CI.estimate, CI.lower.estimate, CI.upper.estimate,</code> <code>N, Nmiss2, endpoint, std.error, statistic, logLik, AIC, BIC, edf, deviance, df.residual, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>binomial</code>,<code>quasibinomial</code>: Logistic regression models
<ul>
<li>default: <code>OR, CI.lower.OR, CI.upper.OR, p.value, concordance, Nmiss</code>
</li>
<li>optional: <code>estimate, CI.OR, CI.estimate, CI.lower.estimate, CI.upper.estimate,</code> <code>CI.wald, CI.lower.wald, CI.upper.wald, CI.OR.wald, CI.lower.OR.wald, CI.upper.OR.wald,</code> <code>N, Nmiss2, endpoint, std.error, statistic, logLik, AIC, BIC, null.deviance, deviance, df.residual, df.null, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>gaussian</code>: Linear regression models
<ul>
<li>default: <code>estimate, std.error, p.value, adj.r.squared, Nmiss</code>
</li>
<li>optional: <code>CI.estimate, CI.lower.estimate, CI.upper.estimate, N, Nmiss2, statistic,</code> <code>standard.estimate, endpoint, r.squared, AIC, BIC, logLik, statistic.F, p.value.F, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>poisson</code>, <code>quasipoisson</code>: Poisson regression models
<ul>
<li>default: <code>RR, CI.lower.RR, CI.upper.RR, p.value, Nmiss</code>
</li>
<li>optional: <code>CI.RR, CI.estimate, CI.lower.estimate, CI.upper.estimate, CI.RR, Nmiss2, std.error,</code> <code>estimate, statistic, endpoint, AIC, BIC, logLik, dispersion, null.deviance, deviance, df.residual, df.null, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>negbin</code>: Negative binomial regression models
<ul>
<li>default: <code>RR, CI.lower.RR, CI.upper.RR, p.value, Nmiss</code>
</li>
<li>optional: <code>CI.RR, CI.estimate, CI.lower.estimate, CI.upper.estimate, CI.RR, Nmiss2, std.error, estimate,</code> <code>statistic, endpoint, AIC, BIC, logLik, dispersion, null.deviance, deviance, df.residual, df.null, theta, SE.theta, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>clog</code>: Conditional Logistic models
<ul>
<li>default: <code>OR, CI.lower.OR, CI.upper.OR, p.value, concordance, Nmiss</code>
</li>
<li>optional: <code>CI.OR, CI.estimate, CI.lower.estimate, CI.upper.estimate, N, Nmiss2, estimate, std.error, endpoint, Nevents, statistic,</code> <code>r.squared, r.squared.max, logLik, AIC, BIC, statistic.log, p.value.log, statistic.sc, p.value.sc,</code> <code>statistic.wald, p.value.wald, N, std.error.concordance, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>survival</code>: Cox models
<ul>
<li>default: <code>HR, CI.lower.HR, CI.upper.HR, p.value, concordance, Nmiss</code>
</li>
<li>optional: <code>CI.HR, CI.estimate, CI.lower.estimate, CI.upper.estimate, N, Nmiss2, estimate, std.error, endpoint,</code> <code>Nevents, statistic, r.squared, r.squared.max, logLik, AIC, BIC, statistic.log, p.value.log, statistic.sc, p.value.sc,</code> <code>statistic.wald, p.value.wald, N, std.error.concordance, p.value.lrt</code>
</li>
</ul>
</li>
</ul>
<p>The full description of these parameters that can be shown for models include:</p>
<ul>
<li>
<code>N</code>: a count of the number of observations used in the analysis</li>
<li>
<code>Nmiss</code>: only show the count of the number of missing values if there are some missing values</li>
<li>
<code>Nmiss2</code>: always show a count of the number of missing values for a model</li>
<li>
<code>endpoint</code>: dependent variable used in the model</li>
<li>
<code>std.err</code>: print the standard error</li>
<li>
<code>statistic</code>: test statistic</li>
<li>
<code>statistic.F</code>: test statistic (F test)</li>
<li>
<code>p.value</code>: print the p-value</li>
<li>
<code>p.value.lrt</code>: print the likelihood ratio p-value for <em>the main effect only</em> (not the adjustors)</li>
<li>
<code>r.squared</code>: print the model R-square</li>
<li>
<code>adj.r.squared</code>: print the model adjusted R-square</li>
<li>
<code>r.squared.max</code>: print the model R-square</li>
<li>
<code>concordance</code>: print the model C statistic (which is the AUC for logistic models)</li>
<li>
<code>logLik</code>: print the loglikelihood value</li>
<li>
<code>p.value.log</code>: print the p-value for the overall model likelihood test</li>
<li>
<code>p.value.wald</code>: print the p-value for the overall model wald test</li>
<li>
<code>p.value.sc</code>: print the p-value for overall model score test</li>
<li>
<code>AIC</code>: print the Akaike information criterion</li>
<li>
<code>BIC</code>: print the Bayesian information criterion</li>
<li>
<code>null.deviance</code>: null deviance</li>
<li>
<code>deviance</code>: model deviance</li>
<li>
<code>df.residual</code>: degrees of freedom for the residual</li>
<li>
<code>df.null</code>: degrees of freedom for the null model</li>
<li>
<code>dispersion</code>: This is used in Poisson models and is defined as the deviance/df.residual</li>
<li>
<code>statistic.sc</code>: overall model score statistic</li>
<li>
<code>statistic.wald</code>: overall model score statistic</li>
<li>
<code>statistic.log</code>: overall model score statistic</li>
<li>
<code>std.error.concordance</code>: standard error for the C statistic</li>
<li>
<code>HR</code>: print the hazard ratio (for survival models), i.e. exp(beta)</li>
<li>
<code>CI.lower.HR, CI.upper.HR</code>: print the confidence interval for the HR</li>
<li>
<code>OR</code>: print the odd’s ratio (for logistic models), i.e. exp(beta)</li>
<li>
<code>CI.lower.OR, CI.upper.OR</code>: print the confidence interval for the OR</li>
<li>
<code>CI.lower.OR.wald, CI.upper.OR.wald</code>: print the Wald confidence interval for the OR</li>
<li>
<code>RR</code>: print the risk ratio (for poisson models), i.e. exp(beta)</li>
<li>
<code>CI.lower.RR, CI.upper.RR</code>: print the confidence interval for the RR</li>
<li>
<code>estimate</code>: print beta coefficient</li>
<li>
<code>standardized.estimate</code>: print the standardized beta coefficient</li>
<li>
<code>CI.lower.estimate, CI.upper.estimate</code>: print the confidence interval for the beta coefficient</li>
<li>
<code>CI.lower.wald, CI.upper.wald</code>: print the Wald confidence interval for the beta coefficient</li>
<li>
<code>edf</code>: print the effective degrees of freedom.</li>
<li>
<code>theta</code>: print the estimate of theta.</li>
<li>
<code>SE.theta</code>: print the estimate of theta’s standard error.</li>
</ul>
</div>
<div id="modelsum-control-settings" class="section level2">
<h2 class="hasAnchor">
<a href="#modelsum-control-settings" class="anchor"></a><code>modelsum.control</code> settings</h2>
<p>A quick way to see what arguments are possible to utilize in a function is to use the <code><a href="https://rdrr.io/r/base/args.html">args()</a></code> command. Settings involving the number of digits can be set in <code>modelsum.control</code> or in <code>summary.modelsum</code>.</p>
<div class="sourceCode" id="cb83"><html><body><pre class="r">&gt; args(modelsum.control)
function (digits = 3L, digits.ratio = 3L, digits.p = 3L, format.p = TRUE, 
    show.adjust = TRUE, show.intercept = TRUE, conf.level = 0.95, 
    ordinal.stats = c("OR", "CI.lower.OR", "CI.upper.OR", "p.value", 
        "Nmiss"), binomial.stats = c("OR", "CI.lower.OR", "CI.upper.OR", 
        "p.value", "concordance", "Nmiss"), gaussian.stats = c("estimate", 
        "std.error", "p.value", "adj.r.squared", "Nmiss"), poisson.stats = c("RR", 
        "CI.lower.RR", "CI.upper.RR", "p.value", "Nmiss"), negbin.stats = c("RR", 
        "CI.lower.RR", "CI.upper.RR", "p.value", "Nmiss"), clog.stats = c("OR", 
        "CI.lower.OR", "CI.upper.OR", "p.value", "concordance", 
        "Nmiss"), survival.stats = c("HR", "CI.lower.HR", "CI.upper.HR", 
        "p.value", "concordance", "Nmiss"), stat.labels = list(), 
    ...) 
NULL</pre></body></html></div>
</div>
<div id="summary-modelsum-settings" class="section level2">
<h2 class="hasAnchor">
<a href="#summary-modelsum-settings" class="anchor"></a><code>summary.modelsum</code> settings</h2>
<p>The summary.modelsum function has options that modify how the table appears (such as adding a title or modifying labels).</p>
<div class="sourceCode" id="cb84"><html><body><pre class="r">&gt; args(arsenal:::summary.modelsum)
function (object, ..., labelTranslations = NULL, text = FALSE, 
    title = NULL, term.name = "", adjustment.names = FALSE) 
NULL</pre></body></html></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ethan Heinzen, Jason Sinnwell, Elizabeth Atkinson, Tina Gunderson, Gregory Dougherty.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
